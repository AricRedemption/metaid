<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MetaID Test Page</title>
    <script type="importmap">
      {
        "imports": {
          "vue": "https://unpkg.com/vue@3/dist/vue.esm-browser.js"
        }
      }
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" href="https://avatars.githubusercontent.com/u/130353550?s=24" />
  </head>

  <body class="min-h-screen bg-gradient-to-br from-sky-500 to-indigo-500 text-white">
    <div id="app" class="max-w-3xl mx-auto py-8">
      <h3 class="text-center font-bold text-2xl">Metaid.js Test Page</h3>

      <!-- control -->
      <div class="mt-16 text-sky-800 font-bold space-y-8">
        <div class="">
          <div class="flex items-center gap-4">
            <div class="grow flex flex-col gap-y-2">
              <input type="text" class="grow rounded-lg h-full text-sm p-3" placeholder="Mnemonic" v-model="mnemonic" />
              <input type="text" class="grow rounded-lg h-full text-sm p-3" placeholder="Path" v-model="path" />
            </div>

            <button class="px-4 py-2 bg-white rounded-md shadow-md" @click="connectWallet">Connect Local Wallet</button>
          </div>

          <!-- metalet wallet -->
          <h3 class="mt-4 text-white">Metalet Wallet</h3>
          <div class="mt-2 grid grid-cols-4 gap-4">
            <button class="px-4 py-2 bg-white rounded-md shadow-md" @click="connectMetaletWithBtc">
              Connect Metalet With Btc
            </button>
            <button class="px-4 py-2 bg-white rounded-md shadow-md" @click="connectMetaletWithMvc">
              Connect Metalet With Mvc
            </button>
            <!-- <button class="px-4 py-2 bg-white rounded-md shadow-md" @click="getBtcAddress">Get BTC Address</button> -->
            <!-- <button class="px-4 py-2 bg-white rounded-md shadow-md" @click="getMvcAddress">Get Mvc Address</button> -->
            <button class="px-4 py-2 bg-white rounded-md shadow-md" @click="getPublicKey">Get Public Key</button>
            <button class="px-4 py-2 bg-white rounded-md shadow-md" @click="send2k">Send 2k</button>

            <button class="px-4 py-2 bg-white rounded-md shadow-md" @click="createMetaidForBTC">
              BTC Create MetaID
            </button>
            <button class="px-4 py-2 bg-white rounded-md shadow-md" @click="createUserForMVC">MVC Create User</button>
            <button class="px-4 py-2 bg-white rounded-md shadow-md" @click="debug">Debug</button>
          </div>

          <p v-if="connected" class="text-teal-200 mt-2">Connected Success {{btcAddress}}</p>
        </div>

        <div class="flex items-center gap-4">
          <input
            type="text"
            class="grow rounded-lg h-full text-sm p-3"
            placeholder="You buzz content"
            v-model="content"
          />
          <button class="px-4 py-2 bg-white rounded-md shadow-md" @click="createBuzzForMVC">Create Buzz</button>
          <button class="px-4 py-2 bg-white rounded-md shadow-md" @click="createBuzzPictureForMVC">
            Create Buzz With Image
          </button>
        </div>

        <div class="">
          <div class="flex gap-4 items-center">
            <div class="font-bold text-white">Buzz List</div>
            <button class="px-4 py-2 bg-white rounded-md shadow-md" @click="getBuzzList">Get List</button>
            <button class="px-4 py-2 bg-white rounded-md shadow-md" @click="likeTheFirst">Like the first</button>
          </div>

          <!-- list -->
          <div class="">
            <div v-for="buzz in buzzes" class="bg-white rounded-md shadow-md p-4 mt-4">
              <div class="flex items-center gap-4">
                <div class="flex-grow">
                  <div class="text-sm text-gray-500">{{ buzz?.contentSummary ?? 'empty value' }}</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script type="module">
      import { createApp, ref, computed, toRaw } from 'vue'
      import {
        // Transaction,
        // Psbt,
        // LocalWallet,
        MetaletWalletForMvc,
        MetaletWalletForBtc,
        btcConnect,
        mvcConnect,
      } from './dist/metaid.js'

      createApp({
        setup() {
          const mnemonic = ref('')
          const path = ref(`m/44'/10001'/0'/0/0`)
          const Buzz = ref(null)
          const File = ref(null)
          const connected = computed(() => !!Buzz.value)
          const content = ref('Hello MetaID V2 !!!')
          const buzzes = ref([])
          const connector = ref(null)
          const wallet = ref(null)
          const btcAddress = computed(() => wallet.value.address)

          const connectWallet = async () => {
            const _wallet = await LocalWallet.create(mnemonic.value, path.value)
            wallet.value = _wallet
          }

          const connectMetaletWithBtc = async () => {
            console.log('connectMetaletWithBtc')
            const _wallet = await MetaletWalletForBtc.create()
            wallet.value = _wallet

            btcAddress.value = await _wallet.getAddress({})
            console.log(`Your btc address is ${btcAddress.value}`)

            const btcConnector = await btcConnect({ wallet: _wallet, network: 'testnet' })
            console.log('your metaid', btcConnector.metaid)
            console.log('your btc connector address', btcConnector.address)
            // if (!btcConnector.hasMetaid) {
            //   const metaid = await btcConnector.createMetaid()
            // }

            // console.log('current metaid and user info', {
            //   metaid: btcConnector?.metaid,
            //   user: btcConnector?.user,
            // })

            const buzzEntity = await btcConnector.use('buzz')
            Buzz.value = buzzEntity
            // const avatarBody =
            //   'iVBORw0KGgoAAAANSUhEUgAAAEMAAABKCAYAAADgxem7AAAAAXNSR0IArs4c6QAABjBJREFUeF7tnFtsFFUYx39nZra7Ld3tYqFQqoZGjRRifNAYn0jkoiCIQFsxERSECGJiolHjGxhQY0w0Eh9QjB'
            // const avatarRes = await btcConnector.inscribe(
            //   [{ operation: 'modify', body: avatarBody, path: '/info/avatar', encoding: 'base64' }],

            //   'no'
            // )
            // console.log('avatar res', avatarRes)
          }

          const connectMetaletWithMvc = async () => {
            console.log('connectMetaletWithMvc')
            const _wallet = await MetaletWalletForMvc.create()
            wallet.value = _wallet

            const mvcConnector = await mvcConnect({ wallet: _wallet, network: 'testnet' })

            const handler1 = await mvcConnector.use('buzz')
            Buzz.value = handler1

            const handler = await mvcConnector.use('file')
            File.value = handler
          }

          const getBtcAddress = async () => {
            const address = await toRaw(wallet.value).getAddress({ blockchain: 'btc' })
            console.log({ address })
            // const baseEntity = await connect(toRaw(wallet.value))
            // console.log('baseEntity', baseEntity)
          }
          const getMvcAddress = async () => {
            const address = await toRaw(wallet.value).getAddress({ blockchain: 'mvc' })
            console.log({ address })
            // const baseEntity = await connect(toRaw(wallet.value))
            // console.log('baseEntity', baseEntity)
          }

          const getPublicKey = async () => {
            const publicKey = await toRaw(wallet.value).getPublicKey('/0/2')

            console.log({ publicKey })
          }

          const send2k = async () => {
            const toAddress = '1F7uWqyb7mJxvPKG8HzsQJWLkP8DqAdHkW'
            const res = await toRaw(wallet.value).send(toAddress, 2000)

            console.log({ res })
          }

          const createBuzzForMVC = async () => {
            console.log('I wanna publish a buzz:', content.value)
            // const res = await toRaw(Buzz.value).list({
            //   page: 1,
            //   limit: 5,
            //   address: 'mnQFdT8SC7mmvV96wvuUQ3QPt2W9gvUT64',
            // })
            // console.log({ res })

            await toRaw(Buzz.value).create({ data: { body: content.value }, options: { network: 'testnet' } })
          }
          const createBuzzPictureForMVC = async () => {
            let attachMetafileUri = [
              'iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAVxSURBVGiB5ZpPbxNHGMafd2btODgJiRz/d5MQVDUVwrWwIieHiO0X4APwJeBQJMKpJ0IQl34JxKFV1aoXEJWMAoeIf1bCAdQSIJGdbiJkSGKceNfz9oCdJsGO116btOrvZM/MO/s8s+OZ17NLaAPxeNwrpTwuhPAppXqUEB5m7iJAAwAGLCLaEUptCyG2lFJvy+Xy+4WFhYLTa1Orgbque94WChGhVISA48zcVF9ExAy8V0LkfF5vLp1Ob7eio2kDyWTyWAk4SczR6gg7hQGLibJu4OXjx48/NBNr24Cu69q7YvEEm+YoAFfTKu1hksu11N/d/SqdTlt2AmwZSKVSfaVSKaGI+pzps4dg3nC73Zn5+fmNRm1lowbxeDxWBs4w0bH2yGsME3VZSkWCfv+OYRiHmjjUwOnx8VEp5Skwt2WuN4kUmhbwR6PltVwuX7dRvYrT4+OjUqmvmVl0Rp8NmEkAg/5YrK6Jmgbi8XhMSnnqSMX/AwkiX2BwsFhrOn1iIJVK9ZWBM0c0bWrDTCSEb2RoaD2bze7srdo3wrqua6VSKYHOLZNOcJVKpYSu6/sGdp+Bd8Xiic+1VLaCIup7Vyye2Fu2ayCZTB6rbFKHcn32xrk7t+/e+vWX336YmjobdCpqaups8Kcff7565/bdW9dnb5xr1J5NczSZTO4u6bsGSsBJ2Jg6iUTivKZp3p6entHpy9NXnZiYmjobnL48fXVgYOC0pmneRCJx3kaYq6IVQMWAruseYo7auejm5uZS9bPH4wm0aqIq3uPxBKpl29vbhp1YYo7quu4BKqtQr98/JJhtiVhd/evZ5MTkhKZpXgDQNM07OTE5sbyyMr+8/MZWelxH/Nrs9dnv7fRBgPhgWdtruVxeAkA4HD4FwGPn4svLbwrLKyvzrZqoJ37m2syVubl7tu5AxYTLWF1dlvF43CukHEMTmWmrJtolHgCIqCvg9+dkJBLxMxBpJrgVE+0UX/UgifIyGo2OKKC/hQ5sm+iAeACAFKIkQ6HQSSepciMTw8MjPZ0QDwBgLtM3yeS3YPY66gj1Rxn4uNzuLWuLeAAgKshgODxGB1KKVqh3J6qfgTaLB8CAkKFweKwdnQG1TVRpt3jg437wb8j3HSGD4fBoO6YQUPt3UKWVHbsRDFgyFIl8AcDttLN6P2LLsgpO0o7DIKKijIRCYacnDoet8/fv3//dae5UD8G8KaPR6ECrG1kj8XNz9wynudNhSCHWZSgU0pgo3Anx1bKOmWBekoFAQAkpR9DkOWmz6UG7TRARK8t6IQ3DMIORSBA20+lWxHfEBNH7hUzmpQSAQCymEbO/k+LbbUJJubSWy+UFAPi83hwDtk6DL3136YrT3GZu7p4xc23mSjVXAj7mSxcvXLxgJ54By+f15oDKBpZOp7eZKGsn2OPx7P71dJIe1DLR29vb8FQEAJgoW30gsrsDu4GXAMxGwZlM5qZlWYV8Pr/oNLepmtja2lqyLKuQyWRu2ggzK1oBHFh5EqnUl2yaX7Uq6HNALteLzPz8H9Xv+3Kg/u7uV4K54UOFo0Iwb/R3d7/aW7bvcPf169dqeHg4bykVOVj3L8DscrsfPXjwoLi38BOR2Wx2J+j37whNC6DJJ4+dgoRQbJrPnjx5sn6wruYoG4ax4Y9GywIYhINHse2AiLgsxPPFp0/f1KqvO03Wcrm8PxYrCyLfUd0JEkKVhXi++PDhUr02h87ztVwuHxgcLJIQvkZtO4DJpvms3shXaSjKMIyNkaGhdVUuDzBRV/v01Ucwb3S53Y9qzfmD2BrVbDa7MzY2lt1RqgyljtuNawGTXK4/+3t6Fg+uNvX4/7xqcJD/7MsetTjK123+Bib+qa2rskiUAAAAAElFTkSuQmCC',
            ]
            console.log('file', 'start')
            let fileTransactions = []
            let finalAttachMetafileUri = []
            // for (const a of attachMetafileUri) {
            //   const { transactions: txs } = await toRaw(File.value).create({
            //     data: {
            //       // body: Buffer.from(a, 'base64'),
            //       body: a,
            //       contentType: `image/jpeg;binary`,
            //       encoding: 'base64',
            //       flag: 'metaid',
            //     },
            //     options: {
            //       network: 'testnet',
            //       signMessage: 'upload image file',
            //       serialAction: 'combo',
            //       transactions: fileTransactions,
            //     },
            //   })
            //   finalAttachMetafileUri.push('metafile://' + txs[txs.length - 1].txComposer.getTxId() + 'i0')
            //   fileTransactions = txs
            // }

            const finalBody = { content: 'Hello World image-with-png', attachments: finalAttachMetafileUri }
            await toRaw(Buzz.value).create({
              data: { body: JSON.stringify(finalBody) },
              options: {
                network: 'testnet',
                signMessage: 'create buzz',
                serialAction: 'finish',
                transactions: fileTransactions,
              },
            })
            console.log('attachMetafileUri', attachMetafileUri)
            await toRaw(Buzz.value).create({ content: content.value, attachments: attachMetafileUri })
          }

          const getBuzzList = async () => {
            console.log(toRaw(Buzz.value))
            const res = await toRaw(Buzz.value).list({ page: 1, limit: 5, network: 'testnet' })
            console.log('buzz res', res)
            buzzes.value = res
          }

          const likeTheFirst = async () => {
            const BuzzHandler = toRaw(Buzz.value)
            const { items } = await BuzzHandler.list()
            const { txid } = items[0]
            console.log({ item: items[0] })
            const Like = await BuzzHandler.connector.use('like')

            await Like.getRoot()
            await Like.create({ likeTo: txid, isLike: '1' })
          }
          const debug = async () => {
            const imgHex =
              'efbfbd504e470d0a1a0a0000000d49484452000000300000003008060000005702efbfbdefbfbd000000017352474200efbfbdefbfbd1cefbfbd0000000473424954080808087c0864efbfbd000005714944415468efbfbdefbfbdefbfbd4f6f134718c69f7766efbfbd383809efbfbd1cefbfbd77efbfbd10543515c2b5efbfbd2227efbfbdefbfbdefbfbd17efbfbd03efbfbd25efbfbd5024c2a9274210efbfbd7e09c4a155d5aa1710efbfbdefbfbd02efbfbdefbfbd7f56efbfbd01efbfbd1220efbfbdefbfbd6e22644862efbfbd78efbfbdefbfbdefbfbdefbfbdefbfbd26efbfbdefbfbdefbfbd5eefbfbdefbfbdefbfbdefbfbd64efbfbdefbfbd3befbfbd3cefbfbdefbfbdefbfbdd7b34b6803efbfbd78efbfbd2befbfbd3c2eefbfbdefbfbd29efbfbd7aefbfbd101e66efbfbd22400300062c22efbfbd114a6d0b21efbfbdefbfbd526fefbfbdefbfbdefbfbdefbfbdefbfbdefbfbdefbfbdefbfbdefbfbd6b53efbfbdefbfbdefbfbdefbfbd7befbfbd160a11efbfbd54efbfbdefbfbdefbfbdefbfbdefbfbd545f44efbfbd0cefbfbd5742efbfbd7c5e6f2eefbfbd4e6fefbfbdefbfbdefbfbd6903efbfbd64efbfbd58093849efbfbdefbfbdefbfbd083befbfbd01efbfbdefbfbdefbfbd6eefbfbdefbfbdefbfbdc78f3f34136bdb80efbfbdefbfbddabb62efbfbd04efbfbdefbfbd280057efbfbd2aefbfbd61efbfbdcbb5efbfbdefbfbdefbfbdefbfbd2aefbfbd4e5b76026c1948efbfbd527defbfbd5229efbfbdefbfbdefbfbdefbfbde9b38760efbfbd70efbfbddd99efbfbdefbfbdefbfbdefbfbd466d65efbfbd06efbfbd783c5606efbfbd30d1b1efbfbdefbfbd6b0c1375594a45efbfbd7eefbfbdefbfbd6118efbfbdefbfbd38efbfbdefbfbdefbfbdefbfbdefbfbd5129efbfbd2930efbfbd65efbfbd37efbfbd14efbfbd16efbfbd47efbfbdefbfbdefbfbd5c2e5fefbfbd51efbfbdefbfbdefbfbdefbfbdefbfbdefbfbd52efbfbdefbfbdefbfbd597446efbfbd0defbfbd4900efbfbdefbfbd58efbfbdefbfbdefbfbdefbfbd06efbfbdefbfbd784c4a79efbfbd48efbfbdefbfbd0309225f6070efbfbd586b3a7d6220efbfbd4aefbfbdefbfbdefbfbd3347346d6aefbfbd4c24efbfbd6f6468683defbfbdefbfbdefbfbdefbfbdefbfbdefbfbd37c2baefbfbd6befbfbd5229efbfbdefbfbd2defbfbd4e70efbfbd4aefbfbdefbfbdefbfbdefbfbdefbfbd0676efbfbdefbfbd77efbfbdefbfbdefbfbdcfb554efbfbdefbfbd22efbfbd7b572cefbfbdefbfbd5befbfbd6b20efbfbd4c1eefbfbd6c52efbfbd727defbfbdc6b93befbfbdefbfbdefbfbdefbfbdefbfbdefbfbdefbfbd7eefbfbdefbfbd3a1b742a6a6aefbfbd6cefbfbdefbfbd1f7fefbfbd7aefbfbdefbfbdefbfbd5befbfbd676fefbfbd6bd49e4d7334efbfbd4cefbfbd2eefbfbdefbfbd064aefbfbd49d8983aefbfbd44e2bca669de9eefbfbdefbfbdefbfbdefbfbdefbfbdefbfbd57efbfbdefbfbdefbfbdefbfbd3a1befbfbdefbfbd3c7d756060e0b4a669efbfbd442271efbfbd46efbfbdefbfbdefbfbd1540c580efbfbdefbfbd1e62efbfbddab9efbfbdefbfbdefbfbdefbfbd52efbfbdefbfbdefbfbdefbfbd09efbfbd6aefbfbd2aefbfbdefbfbdefbfbd04efbfbd65efbfbdefbfbddb86efbfbd5862efbfbdefbfbdefbfbdefbfbd012aefbfbd50efbfbdefbfbd3f24efbfbd6defbfbd585defbfbdefbfbdefbfbdefbfbdefbfbde484a6695e00efbfbd34efbfbd3b393139efbfbdefbfbdefbfbd32efbfbdefbfbdefbfbdefbfbd567a5c47efbfbdefbfbdefbfbdefbfbdefbfbdefbfbdefbfbdefbfbd41efbfbdefbfbd6059efbfbd6befbfbd5c5e0240381c3e05efbfbd63efbfbdefbfbdefbfbdefbfbd6f0aefbfbd2b2bf3ad9aa8277eefbfbdefbfbdcc95efbfbdefbfbd7befbfbdefbfbd40c584efbfbd585d5defbfbdefbfbd78efbfbd2befbfbd1c4313efbfbd69efbfbd26efbfbd251e00efbfbdefbfbd2befbfbdefbfbdefbfbd642412efbfbd33106926efbfbd1513efbfbd145fefbfbd20efbfbdefbfbd321aefbfbdefbfbd28efbfbdefbfbdefbfbd0e6cefbfbdefbfbdefbfbd7800efbfbd14efbfbd2443efbfbdefbfbd4927efbfbd722313efbfbdefbfbd233defbfbd100f00602eefbfbd37efbfbdefbfbdefbfbd60efbfbd3aefbfbd08efbfbd4719efbfbdefbfbdefbfbdefbfbd2d6befbfbd7800202aefbfbd60383c460752efbfbd56efbfbd7727efbfbdefbfbdefbfbd36efbfbd07efbfbdefbfbdefbfbdefbfbd7078efbfbd1defbfbd01efbfbd4d5469efbfbd78efbfbdefbfbd7eefbfbd6fefbfbdefbfbd1d21efbfbdefbfbdefbfbd683befbfbd1050efbfbd7750efbfbdefbfbd1defbfbd110c583214efbfbd7c01efbfbdefbfbdefbfbdefbfbd7a3f62cbb20a4ed28eefbfbd20efbfbdefbfbdefbfbdefbfbd4261efbfbd270eefbfbdefbfbdefbfbdefbfbdefbfbdefbfbdefbfbdefbfbd69efbfbd540fefbfbdefbfbd29efbfbdefbfbdefbfbd40efbfbd1b5923efbfbd7373efbfbd0cefbfbdefbfbdefbfbd614821efbfbd652814d29828efbfbd09efbfbdd5b2efbfbdefbfbd605eefbfbdefbfbd4040092947efbfbdefbfbd3969efbfbdefbfbd41efbfbd4d10112befbfbd7a210defbfbd30efbfbdefbfbd481036efbfbdefbfbd56efbfbd77efbfbd04efbfbdefbfbdefbfbd4cefbfbdefbfbd04efbfbd402cefbfbd11efbfbdefbfbdefbfbdefbfbdefbfbd6d4249efbfbdefbfbdefbfbdefbfbdefbfbd0500efbfbdefbfbdefbfbd1c03efbfbd4eefbfbd2f7d77efbfbdefbfbdefbfbdefbfbd666eefbfbdefbfbd31736defbfbd4a3557023eefbfbd4b172f5cefbfbd6027efbfbd01efbfbdefbfbdefbfbdefbfbdefbfbdefbfbd06efbfbd4eefbfbdefbfbdefbfbd286b27efbfbdefbfbdefbfbdefbfbdefbfbdefbfbd74efbfbd1eefbfbd32efbfbdefbfbdefbfbdefbfbdefbfbd540400efbfbd285b7d20efbfbdefbfbd03efbfbdefbfbdefbfbd00efbfbd46efbfbdefbfbd4cefbfbdefbfbd6559efbfbd7c3eefbfbdefbfbd34efbfbdefbfbdefbfbdefbfbdefbfbdefbfbd5aefbfbd2cefbfbdefbfbdefbfbd646eefbfbd08332b5a011c587912efbfbdd4976cefbfbd5fefbfbd2aefbfbd73402ed78befbfbdefbfbdefbfbd1fefbfbdefbfbdefbfbd72efbfbdefbfbdefbfbdefbfbd57efbfbdefbfbdefbfbd43efbfbdefbfbd42306fefbfbd7777efbfbdefbfbd5befbfbdefbfbd70efbfbdefbfbdefbfbdefbfbd6a7878386f29153958efbfbd2fefbfbdefbfbd72efbfbd1f3d78f0a0b8b7efbfbd13efbfbdefbfbd6c7627efbfbdefbfbdefbfbd084d0befbfbdefbfbd27efbfbdefbfbdefbfbdefbfbd506cefbfbdcf9e3c79efbfbd7eefbfbdefbfbdefbfbd281befbfbdefbfbdefbfbdefbfbd46efbfbd0218efbfbdefbfbd47efbfbded8088efbfbd2cefbfbdefbfbdc5a74fefbfbdd4aaefbfbd3b4defbfbd72efbfbdefbfbd3f162b0b22efbfbd51efbfbd091242efbfbdefbfbd78efbfbdefbfbdefbfbdefbfbd52efbfbd36efbfbdefbfbdefbfbdefbfbd5c2e1f181c2cefbfbd10efbfbd466d3befbfbdc9a6efbfbdefbfbdefbfbdefbfbd576928efbfbd30efbfbdefbfbdefbfbdefbfbdefbfbd75552e0f305157efbfbdefbfbdefbfbd47306f74efbfbddd8f6aefbfbdefbfbdefbfbdefbfbd1aefbfbd6c36efbfbd333636efbfbdefbfbd51efbfbd0cefbfbdefbfbddb8d6b01efbfbd5cefbfbd3fefbfbd7b7a160fefbfbd36efbfbdefbfbdefbfbdefbfbd6a70efbfbdefbfbdefbfbdefbfbd1eefbfbd38efbfbdefbfbd6defbfbd0626efbfbdefbfbdefbfbdefbfbdefbfbd48efbfbd0000000049454e44efbfbd4260efbfbd'
            const base64ed = Buffer.from(Buffer.from(imgHex, 'hex').toString('utf8'), 'utf8').toString('hex')
            const original64 =
              'iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAVxSURBVGiB5ZpPbxNHGMafd2btODgJiRz/d5MQVDUVwrWwIieHiO0X4APwJeBQJMKpJ0IQl34JxKFV1aoXEJWMAoeIf1bCAdQSIJGdbiJkSGKceNfz9oCdJsGO116btOrvZM/MO/s8s+OZ17NLaAPxeNwrpTwuhPAppXqUEB5m7iJAAwAGLCLaEUptCyG2lFJvy+Xy+4WFhYLTa1Orgbque94WChGhVISA48zcVF9ExAy8V0LkfF5vLp1Ob7eio2kDyWTyWAk4SczR6gg7hQGLibJu4OXjx48/NBNr24Cu69q7YvEEm+YoAFfTKu1hksu11N/d/SqdTlt2AmwZSKVSfaVSKaGI+pzps4dg3nC73Zn5+fmNRm1lowbxeDxWBs4w0bH2yGsME3VZSkWCfv+OYRiHmjjUwOnx8VEp5Skwt2WuN4kUmhbwR6PltVwuX7dRvYrT4+OjUqmvmVl0Rp8NmEkAg/5YrK6Jmgbi8XhMSnnqSMX/AwkiX2BwsFhrOn1iIJVK9ZWBM0c0bWrDTCSEb2RoaD2bze7srdo3wrqua6VSKYHOLZNOcJVKpYSu6/sGdp+Bd8Xiic+1VLaCIup7Vyye2Fu2ayCZTB6rbFKHcn32xrk7t+/e+vWX336YmjobdCpqaups8Kcff7565/bdW9dnb5xr1J5NczSZTO4u6bsGSsBJ2Jg6iUTivKZp3p6entHpy9NXnZiYmjobnL48fXVgYOC0pmneRCJx3kaYq6IVQMWAruseYo7auejm5uZS9bPH4wm0aqIq3uPxBKpl29vbhp1YYo7quu4BKqtQr98/JJhtiVhd/evZ5MTkhKZpXgDQNM07OTE5sbyyMr+8/MZWelxH/Nrs9dnv7fRBgPhgWdtruVxeAkA4HD4FwGPn4svLbwrLKyvzrZqoJ37m2syVubl7tu5AxYTLWF1dlvF43CukHEMTmWmrJtolHgCIqCvg9+dkJBLxMxBpJrgVE+0UX/UgifIyGo2OKKC/hQ5sm+iAeACAFKIkQ6HQSSepciMTw8MjPZ0QDwBgLtM3yeS3YPY66gj1Rxn4uNzuLWuLeAAgKshgODxGB1KKVqh3J6qfgTaLB8CAkKFweKwdnQG1TVRpt3jg437wb8j3HSGD4fBoO6YQUPt3UKWVHbsRDFgyFIl8AcDttLN6P2LLsgpO0o7DIKKijIRCYacnDoet8/fv3//dae5UD8G8KaPR6ECrG1kj8XNz9wynudNhSCHWZSgU0pgo3Anx1bKOmWBekoFAQAkpR9DkOWmz6UG7TRARK8t6IQ3DMIORSBA20+lWxHfEBNH7hUzmpQSAQCymEbO/k+LbbUJJubSWy+UFAPi83hwDtk6DL3136YrT3GZu7p4xc23mSjVXAj7mSxcvXLxgJ54By+f15oDKBpZOp7eZKGsn2OPx7P71dJIe1DLR29vb8FQEAJgoW30gsrsDu4GXAMxGwZlM5qZlWYV8Pr/oNLepmtja2lqyLKuQyWRu2ggzK1oBHFh5EqnUl2yaX7Uq6HNALteLzPz8H9Xv+3Kg/u7uV4K54UOFo0Iwb/R3d7/aW7bvcPf169dqeHg4bykVOVj3L8DscrsfPXjwoLi38BOR2Wx2J+j37whNC6DJJ4+dgoRQbJrPnjx5sn6wruYoG4ax4Y9GywIYhINHse2AiLgsxPPFp0/f1KqvO03Wcrm8PxYrCyLfUd0JEkKVhXi++PDhUr02h87ztVwuHxgcLJIQvkZtO4DJpvms3shXaSjKMIyNkaGhdVUuDzBRV/v01Ucwb3S53Y9qzfmD2BrVbDa7MzY2lt1RqgyljtuNawGTXK4/+3t6Fg+uNvX4/7xqcJD/7MsetTjK123+Bib+qa2rskiUAAAAAElFTkSuQmCC'
            console.log(base64ed, Buffer.from(original64, 'base64').toString('hex'))
          }

          const createMetaidForBTC = async () => {
            const _wallet = await MetaletWalletForBtc.create()
            const connector = await btcConnect(_wallet)
            console.log({ connector })
            const res = await connector.createMetaid({ name: 'ttb' }).catch((error) => console.log('error html', error))
            console.log(res)
          }
          const createUserForMVC = async () => {
            const _wallet = await MetaletWalletForMvc.create()
            const mvcConnector = await mvcConnect({ wallet: _wallet, network: 'testnet' })
            console.log({ connector })
            const res = await mvcConnector
              .createUserInfo({ name: 'zico' })
              .catch((error) => console.log('error mvc create user', error))
            console.log('create mvc metaid-user res', res)
          }

          return {
            connectWallet,
            connectMetaletWithBtc,
            connectMetaletWithMvc,
            path,
            wallet,
            mnemonic,
            connected,
            content,
            createBuzzForMVC,
            createBuzzPictureForMVC,
            getBuzzList,
            buzzes,
            getMvcAddress,
            getBtcAddress,
            getPublicKey,
            send2k,
            createMetaidForBTC,
            createUserForMVC,
            likeTheFirst,
            btcAddress,
            debug,
          }
        },
      }).mount('#app')
    </script>
  </body>
</html>
